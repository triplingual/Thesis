<html>
<head>
	<title>Places of Education in Mid-C19 Senegambia</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
   crossorigin=""/>
	<!-- Make sure you put this AFTER Leaflet's CSS -->
	<script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
		integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
   crossorigin=""></script> 
   
   <script src="/js/leaflet.ajax.min.js"></script>
   
   <style type="text/css">
	   .leaflet-container {
	       background-color: #E6D1B7;
	   }
	   #map {
	       width: 900px;
	       height: 700px;
	       float: left;
	       min-width: 320px;
	       margin: 1%;
	   }
	   #commentary {
	       width: 30%;
	       min-width: 300px;
	       max-width: 900px;
	       float: left;
	       clear: none;
	       margin: 1%;
	   }
   </style>
   
</head>
<body>
	<div id="map"></div>
	<div id="commentary">
		<h1 style="margin-top: 0;">Commentary</h1>
		<p>
		Spicy jalapeno bacon ipsum dolor amet chuck prosciutto tongue, boudin porchetta pig burgdoggen salami pastrami doner venison biltong. Salami pork loin flank, kielbasa ribeye short loin andouille frankfurter filet mignon chicken. Tongue tri-tip cupim, filet mignon pig kevin burgdoggen ball tip fatback. Tongue landjaeger shankle, corned beef shoulder boudin sirloin kielbasa pancetta pork loin swine tri-tip.
		</p>
		<p>
		Pancetta salami leberkas, beef ribs swine andouille chuck meatloaf t-bone chicken ball tip jowl boudin landjaeger turducken. Meatloaf flank short loin beef ribs pork, turkey spare ribs filet mignon t-bone drumstick tongue. Chicken meatball pig short loin beef ribs leberkas. Prosciutto tongue pork shank sirloin turkey pork loin jerky picanha ground round. Chuck pastrami t-bone prosciutto shank landjaeger alcatra porchetta flank. Capicola tongue corned beef, drumstick shank salami sausage pork chop. Hamburger swine venison jowl, meatloaf pig frankfurter meatball rump pork alcatra capicola ground round.
		</p>
		<p>
		Explainer image for the whole map at http://chicago.universitypressscholarship.com/doc/10.7208/chicago/9780226127019.001.0001/upso-9780226126968-graphic-033.jpg
		</p>
	</div>

	<script>
		var accessToken = 'pk.eyJ1IjoidHJpcGxpbmd1YWwiLCJhIjoiUFZTSEpYNCJ9.TjhlG-pOgpKcxXt8vL-IOg';
		var mymap = L.map('map').setView([24.64702, 17.27051], 4);

		var kmmsAttribution	= "'Receuil' (containing 'Tarǧamat al-Masālik al-Mamālik', a Persian translation of al-Istakhrī's 'Kitāb al-Masālik w'al-Mamālik'), Bibliothèque nationale de France, <a href='http://gallica.bnf.fr/ark:/12148/btv1b7200028f/f8.image' title='Gallica at Bibliothèque nationale de France entry for this map'>identifier ark:/12148/btv1b7200028f</a>"

		// If we try to coerce a KMMS map into georectification
		var kmms = L.tileLayer('http://mapwarper.net/maps/tile/23232/{z}/{x}/{y}.png', 
			{
				attribution: kmmsAttribution,
			minzoom: 6,
			maxzoom: 12
			});
//		kmms.addTo(mymap);

		// Non-georeferencable map image as ImageOverlay
		// NB: imageBounds are in SW, NE order
		var imageUrl = '/images/istakhri.png',
			imageBounds = [[-5.048874, -20.175048], [47.858145, 54.194210]],
			imageOptions = {
				alt: "'Receuil', (contains 'Tarǧamat al-Masālik al-Mamālik') Bibliothèque nationale de France", 
				attribution: kmmsAttribution,
			};
		L.imageOverlay( imageUrl, imageBounds, imageOptions).addTo(mymap);
		

		// In the twelfth and thirteenth centuries, a new recension appears in which the Mediterranean and the Indian Ocean/Persian Gulf are depicted as containing three islands each: present-day Sicily (Ṣiqilliya), Crete (Iqrīṭish), and Cyprus (Qubrus) in the Mediterranean; and the islands of Khārg (Khārak), Baḥrain (Awāl/Uwāl), and Lāft (Qishm) in the Persian Gulf/Indian Ocean.
		// Pinto, 72
		
		// In the Persian Gulf, the least well known of the three islands is the one labeled “Lāft.” I have been able to identify this as a reference to the largest Iranian island of Qishm because the main town is called “Lāft.” Qishm is not only the largest island in the Persian Gulf; it is also located right at its mouth with the Indian Ocean and guards the Straits of Hormuz. It must have been a crucial island for shipping, yet because “Lāft” was not noticed before on the medieval Islamic maps, its significance was not realized until now. The island of Baḥrain, familiar to us today as a major business center off the coast of Saudi Arabia—and lately for the brutally suppressed protest movement—was one of the most important islands in the Persian Gulf in the medieval period because of its natural deepwater port and its pearls. Now oil has superseded pearling. Khārak, better known in petroleum circles as Kharg, lies opposite the islands of Baḥrain and Tārūt, along the Iranian flank. It is positioned close to the Hormuz Straits (entrance to the Persian Gulf from the Indian Ocean) and as a result has always been a key and heavily contested site. Like Baḥrain, it too was known in the medieval period for its high-quality pearls. Today Kharg is one of the key ports for Iranian oil.
		// Pinto, 72 n15

		// Markers, for explanatory positioning
		var cyprus = L.marker( [12.83055, 21.79962] );
		cyprus.bindPopup("Cyprus<br />Karen C. Pinto, <a href='http://dx.doi.org/10.7208/chicago/9780226127019.001.0001'>Medieval Islamic Maps: An Exploration</a> (Chicago: The University of Chicago Press, 2017), 72.").openPopup();
		cyprus.addTo(mymap);

		var crete = L.marker( [13.18379, 24.93073] );
		crete.bindPopup("Crete<br />Karen C. Pinto, <a href='http://dx.doi.org/10.7208/chicago/9780226127019.001.0001'>Medieval Islamic Maps: An Exploration</a> (Chicago: The University of Chicago Press, 2017), 72.").openPopup();
		crete.addTo(mymap);
		
		var sicily = L.marker( [13.92074, 28.33649] );
		sicily.bindPopup("Sicily<br />Karen C. Pinto, <a href='http://dx.doi.org/10.7208/chicago/9780226127019.001.0001'>Medieval Islamic Maps: An Exploration</a> (Chicago: The University of Chicago Press, 2017), 72.").openPopup();
		sicily.addTo(mymap);
		
		var egypt = L.marker( [18.01008, 30.11353] );
		egypt.bindPopup("Nile River, Egyptian portion<br />Karen C. Pinto, <a href='http://dx.doi.org/10.7208/chicago/9780226127019.001.0001'>Medieval Islamic Maps: An Exploration</a> (Chicago: The University of Chicago Press, 2017), 72.").openPopup();
		egypt.addTo(mymap);
		
		var senegal = L.marker( [25.76032, 36.0791], {draggable: true} );
		senegal.addTo(mymap);
		senegal.bindPopup("'Bilad al-Sudan' (Land of the Black [People])<br />\nKaren C. Pinto, <a href='http://dx.doi.org/10.7208/chicago/9780226127019.001.0001'>Medieval Islamic Maps: An Exploration</a> (Chicago: The University of Chicago Press, 2017), 72.").openPopup();
		
		var kharg = L.marker( [26.78092, 17.41223] );
		kharg.bindPopup("Khārak (now Kharg)<br />\nKaren C. Pinto, <a href='http://dx.doi.org/10.7208/chicago/9780226127019.001.0001'>Medieval Islamic Maps: An Exploration</a> (Chicago: The University of Chicago Press, 2017), 72.").openPopup();
		kharg.addTo(mymap);
		
		var bahrain = L.marker( [30.12232, 18.06592] );
		bahrain.bindPopup("Awāl/Uwāl (now Baḥrain)<br />\nKaren C. Pinto, <a href='http://dx.doi.org/10.7208/chicago/9780226127019.001.0001'>Medieval Islamic Maps: An Exploration</a> (Chicago: The University of Chicago Press, 2017), 72.").openPopup();
		bahrain.addTo(mymap);
		
		var laft = L.marker( [31.14324, 15.36328] )
					.bindPopup("Lāft (now Qishm)<br />\nKaren C. Pinto, <a href='http://dx.doi.org/10.7208/chicago/9780226127019.001.0001'>Medieval Islamic Maps: An Exploration</a> (Chicago: The University of Chicago Press, 2017), 72.").openPopup();
		laft.addTo(mymap);
		
		var euphrates = L.marker( [20.1426, 18.36475] );
		euphrates.bindPopup("Euphrates River<br />\nKaren C. Pinto, <a href='http://dx.doi.org/10.7208/chicago/9780226127019.001.0001'>Medieval Islamic Maps: An Exploration</a> (Chicago: The University of Chicago Press, 2017), 72.").openPopup();
		euphrates.addTo(mymap);

		
		// TODO: READ PINTO FOR MORE PLACES TO MARK
		
		// example of how a function might work
		var popup = L.popup();

		function onMapClick(e) {
			popup
				.setLatLng(e.latlng)
				.setContent("You clicked the map at " + e.latlng.toString())
				.openOn(mymap);
		}

		mymap.on('click', onMapClick);
	</script>
</body>
</html>